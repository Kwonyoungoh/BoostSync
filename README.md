 # BoostSync

 BoostSync는 Boost.Asio를 사용하여 병렬 처리를 하고, Redis Pub/Sub를 통해 게임 클라이언트 간의 통신을 가능하게 하는 C++로 작성된 게임 서버 예제입니다.

## 사용 기술 스택

### BoostSync 서버

- **C++**: 시스템 자원을 효율적으로 활용하고 복잡한 네트워크 프로그래밍에 적합합니다.
- **Boost.Asio**: 비동기 I/O와 네트워크 프로그래밍을 위한 Boost 라이브러리입니다.
- **Boost.Thread**: 병렬 처리 작업을 위한 Boost 라이브러리입니다.
- **Redis**: 메시지 브로커로 사용하여, 게임 클라이언트 간의 데이터 동기화를 가능하게 합니다.
- **Redis++**: 해당 라이브러리를 통해 Redis의 Pub/Sub 기능을 지원합니다.
- **nlohmann/json**: JSON 데이터를 파싱하고 생성하는 데 사용되는 C++ 라이브러리입니다.

### 빌드 및 배포

BoostSync는 WSL2 와 Visual Studio의 CMake 프로젝트 템플릿을 활용하여 리눅스 기반 환경에서 개발되었습니다. 또한 로컬 환경에서 Docker Desktop 내부 Kubernetes를 이용하여 배포 및 테스트 과정을 진행하였으며, 이를 통해 클라우드 환경에서의 실제 동작을 사전에 검증하였습니다.

- **WSL2 (Windows Subsystem for Linux 2)**: Windows에서 Linux 개발 환경을 제공하여 서버 개발을 지원합니다.
- **Visual Studio CMake**: C++ 프로젝트를 빌드하고 관리하는 데 사용됩니다.
- **Docker**: 서버 애플리케이션과 그 실행 환경을 패키징하여 분리된 컨테이너 환경에서 실행할 수 있도록 합니다.
- **Kubernetes**: 컨테이너화된 애플리케이션의 배포, 확장 및 관리를 자동화 플랫폼입니다.

## 코드 설명

해당 코드는 청크단위 UDP 이동 동기화 서버를 구현합니다. 서버는 클라이언트로부터의 이동 정보를 받아, Redis Pub/Sub를 이용하여 클라이언트 간에 캐릭터 이동정보를 교환합니다.

`UdpServer` 클래스가 주요 기능을 담당하며, 각 클라이언트에서 발생하는 다양한 이벤트를 처리합니다. 클라이언트의 연결 및 연결 해제, 데이터 수신, 청크 변경 등의 이벤트가 이에 해당합니다.

서버는 각 클라이언트를 청크 단위로 관리하며, 이는 클라이언트가 접속한 레벨의 구역 단위를 나타냅니다. 클라이언트가 청크를 변경하면 서버는 이를 감지하고 해당 청크에 대한 구독 혹은 구독 취소를 수행합니다.

서버와 클라이언트 간의 메시지 전달은 Redis의 Pub/Sub 기능을 통해 이루어집니다. 서버는 `sub_channel`, `unsub_channel`, `pub_msg` 메서드를 통해 이를 처리하며, `handle_msg` 메서드를 통해 받은 메시지를 해당 청크의 모든 클라이언트에게 전달합니다.